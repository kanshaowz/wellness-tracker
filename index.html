<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wellness Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes ripple {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }
        .ripple-effect {
            animation: ripple 0.6s ease-out;
        }
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .wave-animation {
            animation: wave 3s ease-in-out infinite;
        }
        @keyframes wave {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .sleep-phase {
            transition: all 0.3s ease;
        }
        .sleep-phase:hover {
            transform: scale(1.05);
        }
        .badge-shine {
            animation: shine 2s infinite;
        }
        @keyframes shine {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-400 via-teal-400 to-cyan-500">
    <!-- Language Selector -->
    <div class="fixed top-4 right-4 z-50">
        <select id="languageSelector" class="glass rounded-lg px-4 py-2 text-white font-medium focus:outline-none focus:ring-2 focus:ring-white/50">
            <option value="en">English</option>
            <option value="zh">ä¸­æ–‡</option>
            <option value="ja">æ—¥æœ¬èªž</option>
            <option value="ko">í•œêµ­ì–´</option>
        </select>
    </div>

    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-5xl font-bold text-white mb-2" data-i18n="appTitle">Wellness Tracker</h1>
            <p class="text-white/80 text-lg" data-i18n="appSubtitle">Track your hydration and sleep for a healthier life</p>
        </header>

        <!-- Tab Navigation -->
        <div class="flex justify-center mb-8 gap-4">
            <button id="waterTab" class="glass px-8 py-3 rounded-full text-white font-semibold transition-all hover:bg-white/20 active-tab">
                <span data-i18n="waterTracker">ðŸ’§ Water Tracker</span>
            </button>
            <button id="sleepTab" class="glass px-8 py-3 rounded-full text-white font-semibold transition-all hover:bg-white/20">
                <span data-i18n="sleepCalculator">ðŸ˜´ Sleep Calculator</span>
            </button>
        </div>

        <!-- Water Tracker Section -->
        <div id="waterSection" class="space-y-6">
            <!-- Daily Goal Calculator -->
            <div class="glass rounded-3xl p-8">
                <h2 class="text-2xl font-bold text-white mb-6" data-i18n="dailyGoal">Daily Water Goal</h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-white/90 mb-2" data-i18n="weightLabel">Weight (kg)</label>
                        <input type="number" id="weight" class="w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white placeholder-white/50" placeholder="70" value="70">
                    </div>
                    <div>
                        <label class="block text-white/90 mb-2" data-i18n="activityLabel">Activity Level</label>
                        <select id="activityLevel" class="w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white">
                            <option value="1.0" data-i18n="sedentary">Sedentary</option>
                            <option value="1.2" data-i18n="light" selected>Light</option>
                            <option value="1.4" data-i18n="moderate">Moderate</option>
                            <option value="1.6" data-i18n="active">Active</option>
                        </select>
                    </div>
                </div>
                <div class="mt-6 text-center">
                    <p class="text-white/80 mb-2" data-i18n="recommendedIntake">Recommended Daily Intake</p>
                    <p class="text-5xl font-bold text-white" id="dailyGoalDisplay">2400 ml</p>
                </div>
            </div>

            <!-- Visual Progress -->
            <div class="glass rounded-3xl p-8">
                <h2 class="text-2xl font-bold text-white mb-6" data-i18n="todayProgress">Today's Progress</h2>
                <div class="relative w-full h-64 bg-white/10 rounded-3xl overflow-hidden mb-6">
                    <div id="waterLevel" class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-blue-500 to-cyan-400 transition-all duration-500 wave-animation" style="height: 0%"></div>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="text-center">
                            <p class="text-6xl font-bold text-white" id="currentIntake">0</p>
                            <p class="text-xl text-white/90">/ <span id="goalDisplay">2400</span> ml</p>
                            <p class="text-2xl font-semibold text-white mt-2" id="percentageDisplay">0%</p>
                        </div>
                    </div>
                </div>

                <!-- Quick Add Buttons -->
                <div class="grid grid-cols-3 gap-4 mb-6">
                    <button onclick="addWater(250)" class="glass hover:bg-white/20 rounded-2xl py-6 text-white font-semibold text-lg transition-all transform hover:scale-105">
                        +250ml
                    </button>
                    <button onclick="addWater(500)" class="glass hover:bg-white/20 rounded-2xl py-6 text-white font-semibold text-lg transition-all transform hover:scale-105">
                        +500ml
                    </button>
                    <button onclick="showCustomInput()" class="glass hover:bg-white/20 rounded-2xl py-6 text-white font-semibold text-lg transition-all transform hover:scale-105" data-i18n="custom">
                        Custom
                    </button>
                </div>

                <!-- Custom Input (Hidden by default) -->
                <div id="customInput" class="hidden mb-6">
                    <div class="flex gap-4">
                        <input type="number" id="customAmount" class="flex-1 bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white placeholder-white/50" placeholder="Amount in ml">
                        <button onclick="addCustomWater()" class="bg-white/30 hover:bg-white/40 px-6 rounded-lg text-white font-semibold transition-all" data-i18n="add">Add</button>
                        <button onclick="hideCustomInput()" class="bg-white/20 hover:bg-white/30 px-6 rounded-lg text-white font-semibold transition-all" data-i18n="cancel">Cancel</button>
                    </div>
                </div>

                <!-- Reset Button -->
                <button onclick="resetWaterToday()" class="w-full glass hover:bg-white/20 rounded-2xl py-3 text-white font-semibold transition-all" data-i18n="resetToday">
                    Reset Today
                </button>
            </div>

            <!-- Achievement Badges -->
            <div class="glass rounded-3xl p-8">
                <h2 class="text-2xl font-bold text-white mb-6" data-i18n="achievements">Achievements</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="badgesContainer">
                    <!-- Badges will be generated by JS -->
                </div>
            </div>

            <!-- Daily History -->
            <div class="glass rounded-3xl p-8">
                <h2 class="text-2xl font-bold text-white mb-6" data-i18n="history">History</h2>
                <div class="space-y-3" id="historyContainer">
                    <p class="text-white/60 text-center py-8" data-i18n="noHistory">No history yet. Start tracking!</p>
                </div>
            </div>
        </div>

        <!-- Sleep Calculator Section -->
        <div id="sleepSection" class="hidden space-y-6">
            <!-- Sleep Cycle Calculator -->
            <div class="glass rounded-3xl p-8">
                <h2 class="text-2xl font-bold text-white mb-6" data-i18n="sleepCycles">Sleep Cycle Calculator</h2>
                <p class="text-white/80 mb-6" data-i18n="cycleInfo">Each sleep cycle is 90 minutes. Optimal sleep includes 4-6 cycles.</p>

                <div class="mb-8">
                    <label class="block text-white/90 mb-3 text-lg" data-i18n="wakeUpAt">I want to wake up at:</label>
                    <input type="time" id="wakeUpTime" class="w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white text-lg" value="07:00">
                    <button onclick="calculateBedtimes()" class="w-full mt-4 bg-white/30 hover:bg-white/40 rounded-lg py-3 text-white font-semibold transition-all" data-i18n="calculate">
                        Calculate Best Bedtimes
                    </button>
                </div>

                <div id="bedtimesResult" class="hidden">
                    <h3 class="text-xl font-semibold text-white mb-4" data-i18n="suggestedBedtimes">Suggested Bedtimes:</h3>
                    <div class="grid md:grid-cols-3 gap-4" id="bedtimesList"></div>
                </div>
            </div>

            <!-- Bedtime Calculator -->
            <div class="glass rounded-3xl p-8">
                <h2 class="text-2xl font-bold text-white mb-6" data-i18n="bedtimePlanner">Bedtime Planner</h2>
                <div class="mb-8">
                    <label class="block text-white/90 mb-3 text-lg" data-i18n="goToBedAt">I'm going to bed at:</label>
                    <input type="time" id="bedTime" class="w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white text-lg" value="23:00">
                    <button onclick="calculateWakeTimes()" class="w-full mt-4 bg-white/30 hover:bg-white/40 rounded-lg py-3 text-white font-semibold transition-all" data-i18n="calculate">
                        Calculate Best Wake Times
                    </button>
                </div>

                <div id="waketimesResult" class="hidden">
                    <h3 class="text-xl font-semibold text-white mb-4" data-i18n="suggestedWakeTimes">Suggested Wake Times:</h3>
                    <div class="grid md:grid-cols-3 gap-4" id="waketimesList"></div>
                </div>
            </div>

            <!-- Sleep Debt Calculator -->
            <div class="glass rounded-3xl p-8">
                <h2 class="text-2xl font-bold text-white mb-6" data-i18n="sleepDebt">Sleep Debt Calculator</h2>
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-white/90 mb-2" data-i18n="avgSleepLabel">Average sleep per night (hours)</label>
                        <input type="number" id="avgSleep" class="w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white" placeholder="6.5" step="0.5" value="6.5">
                    </div>
                    <div>
                        <label class="block text-white/90 mb-2" data-i18n="daysLabel">Number of days</label>
                        <input type="number" id="numDays" class="w-full bg-white/20 border border-white/30 rounded-lg px-4 py-3 text-white" placeholder="7" value="7">
                    </div>
                </div>
                <button onclick="calculateSleepDebt()" class="w-full bg-white/30 hover:bg-white/40 rounded-lg py-3 text-white font-semibold transition-all mb-6" data-i18n="calculate">
                    Calculate Sleep Debt
                </button>
                <div id="sleepDebtResult" class="hidden">
                    <div class="bg-white/10 rounded-2xl p-6 text-center">
                        <p class="text-white/80 mb-2" data-i18n="totalDebt">Total Sleep Debt</p>
                        <p class="text-4xl font-bold text-white" id="debtAmount">0</p>
                        <p class="text-white/60 mt-4" id="debtAdvice"></p>
                    </div>
                </div>
            </div>

            <!-- Sleep Phases Visualization -->
            <div class="glass rounded-3xl p-8">
                <h2 class="text-2xl font-bold text-white mb-6" data-i18n="sleepPhases">Sleep Phases</h2>
                <p class="text-white/80 mb-6" data-i18n="phasesInfo">A complete sleep cycle goes through 5 stages</p>
                <div class="space-y-4">
                    <div class="sleep-phase glass rounded-2xl p-6">
                        <div class="flex items-center mb-3">
                            <div class="w-12 h-12 bg-blue-500/30 rounded-full flex items-center justify-center text-2xl mr-4">1</div>
                            <h3 class="text-xl font-semibold text-white" data-i18n="phase1Title">Light Sleep (N1)</h3>
                        </div>
                        <p class="text-white/70" data-i18n="phase1Desc">Transition between wakefulness and sleep. Lasts 5-10 minutes.</p>
                    </div>
                    <div class="sleep-phase glass rounded-2xl p-6">
                        <div class="flex items-center mb-3">
                            <div class="w-12 h-12 bg-blue-600/30 rounded-full flex items-center justify-center text-2xl mr-4">2</div>
                            <h3 class="text-xl font-semibold text-white" data-i18n="phase2Title">Light Sleep (N2)</h3>
                        </div>
                        <p class="text-white/70" data-i18n="phase2Desc">Heart rate slows, body temperature drops. Lasts 10-25 minutes.</p>
                    </div>
                    <div class="sleep-phase glass rounded-2xl p-6">
                        <div class="flex items-center mb-3">
                            <div class="w-12 h-12 bg-indigo-600/30 rounded-full flex items-center justify-center text-2xl mr-4">3</div>
                            <h3 class="text-xl font-semibold text-white" data-i18n="phase3Title">Deep Sleep (N3)</h3>
                        </div>
                        <p class="text-white/70" data-i18n="phase3Desc">Most restorative phase. Body repairs tissues and builds bone and muscle. Lasts 20-40 minutes.</p>
                    </div>
                    <div class="sleep-phase glass rounded-2xl p-6">
                        <div class="flex items-center mb-3">
                            <div class="w-12 h-12 bg-purple-600/30 rounded-full flex items-center justify-center text-2xl mr-4">4</div>
                            <h3 class="text-xl font-semibold text-white" data-i18n="phase4Title">Deep Sleep Continues</h3>
                        </div>
                        <p class="text-white/70" data-i18n="phase4Desc">Deepest sleep stage. Very hard to wake up. Lasts 10-20 minutes.</p>
                    </div>
                    <div class="sleep-phase glass rounded-2xl p-6">
                        <div class="flex items-center mb-3">
                            <div class="w-12 h-12 bg-pink-600/30 rounded-full flex items-center justify-center text-2xl mr-4">5</div>
                            <h3 class="text-xl font-semibold text-white" data-i18n="phase5Title">REM Sleep</h3>
                        </div>
                        <p class="text-white/70" data-i18n="phase5Desc">Rapid eye movement. Dreams occur. Brain consolidates memories. Lasts 10-60 minutes.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Translations
        const translations = {
            en: {
                appTitle: "Wellness Tracker",
                appSubtitle: "Track your hydration and sleep for a healthier life",
                waterTracker: "ðŸ’§ Water Tracker",
                sleepCalculator: "ðŸ˜´ Sleep Calculator",
                dailyGoal: "Daily Water Goal",
                weightLabel: "Weight (kg)",
                activityLabel: "Activity Level",
                sedentary: "Sedentary",
                light: "Light",
                moderate: "Moderate",
                active: "Active",
                recommendedIntake: "Recommended Daily Intake",
                todayProgress: "Today's Progress",
                custom: "Custom",
                add: "Add",
                cancel: "Cancel",
                resetToday: "Reset Today",
                achievements: "Achievements",
                history: "History",
                noHistory: "No history yet. Start tracking!",
                sleepCycles: "Sleep Cycle Calculator",
                cycleInfo: "Each sleep cycle is 90 minutes. Optimal sleep includes 4-6 cycles.",
                wakeUpAt: "I want to wake up at:",
                calculate: "Calculate",
                suggestedBedtimes: "Suggested Bedtimes:",
                bedtimePlanner: "Bedtime Planner",
                goToBedAt: "I'm going to bed at:",
                suggestedWakeTimes: "Suggested Wake Times:",
                sleepDebt: "Sleep Debt Calculator",
                avgSleepLabel: "Average sleep per night (hours)",
                daysLabel: "Number of days",
                totalDebt: "Total Sleep Debt",
                sleepPhases: "Sleep Phases",
                phasesInfo: "A complete sleep cycle goes through 5 stages",
                phase1Title: "Light Sleep (N1)",
                phase1Desc: "Transition between wakefulness and sleep. Lasts 5-10 minutes.",
                phase2Title: "Light Sleep (N2)",
                phase2Desc: "Heart rate slows, body temperature drops. Lasts 10-25 minutes.",
                phase3Title: "Deep Sleep (N3)",
                phase3Desc: "Most restorative phase. Body repairs tissues and builds bone and muscle. Lasts 20-40 minutes.",
                phase4Title: "Deep Sleep Continues",
                phase4Desc: "Deepest sleep stage. Very hard to wake up. Lasts 10-20 minutes.",
                phase5Title: "REM Sleep",
                phase5Desc: "Rapid eye movement. Dreams occur. Brain consolidates memories. Lasts 10-60 minutes.",
                cycles: "cycles",
                hours: "hours",
                firstDay: "First Day! ðŸŽ‰",
                threeDays: "3 Day Streak! ðŸ”¥",
                weekWarrior: "Week Warrior! ðŸ’ª",
                goalReached: "Goal Reached Today! ðŸŽ¯",
                overachiever: "Overachiever! ðŸŒŸ",
                hydrationHero: "Hydration Hero! ðŸ’§",
                debtLow: "Great! You're getting enough sleep.",
                debtModerate: "You have some sleep debt. Try to get more rest.",
                debtHigh: "Significant sleep debt! Prioritize sleep this week."
            },
            zh: {
                appTitle: "å¥åº·è¿½è¸ªå™¨",
                appSubtitle: "è¿½è¸ªæ‚¨çš„æ°´åˆ†å’Œç¡çœ ï¼Œè¿‡æ›´å¥åº·çš„ç”Ÿæ´»",
                waterTracker: "ðŸ’§ æ°´åˆ†è¿½è¸ª",
                sleepCalculator: "ðŸ˜´ ç¡çœ è®¡ç®—å™¨",
                dailyGoal: "æ¯æ—¥é¥®æ°´ç›®æ ‡",
                weightLabel: "ä½“é‡ (å…¬æ–¤)",
                activityLabel: "æ´»åŠ¨æ°´å¹³",
                sedentary: "ä¹…å",
                light: "è½»åº¦æ´»åŠ¨",
                moderate: "ä¸­åº¦æ´»åŠ¨",
                active: "é«˜åº¦æ´»åŠ¨",
                recommendedIntake: "å»ºè®®æ¯æ—¥æ‘„å…¥é‡",
                todayProgress: "ä»Šæ—¥è¿›åº¦",
                custom: "è‡ªå®šä¹‰",
                add: "æ·»åŠ ",
                cancel: "å–æ¶ˆ",
                resetToday: "é‡ç½®ä»Šæ—¥",
                achievements: "æˆå°±",
                history: "åŽ†å²è®°å½•",
                noHistory: "è¿˜æ²¡æœ‰è®°å½•ï¼Œå¼€å§‹è¿½è¸ªå§ï¼",
                sleepCycles: "ç¡çœ å‘¨æœŸè®¡ç®—å™¨",
                cycleInfo: "æ¯ä¸ªç¡çœ å‘¨æœŸ90åˆ†é’Ÿã€‚æœ€ä½³ç¡çœ åŒ…å«4-6ä¸ªå‘¨æœŸã€‚",
                wakeUpAt: "æˆ‘æƒ³åœ¨ä»¥ä¸‹æ—¶é—´èµ·åºŠï¼š",
                calculate: "è®¡ç®—",
                suggestedBedtimes: "å»ºè®®å°±å¯æ—¶é—´ï¼š",
                bedtimePlanner: "å°±å¯è®¡åˆ’å™¨",
                goToBedAt: "æˆ‘å°†åœ¨ä»¥ä¸‹æ—¶é—´ç¡è§‰ï¼š",
                suggestedWakeTimes: "å»ºè®®èµ·åºŠæ—¶é—´ï¼š",
                sleepDebt: "ç¡çœ å€ºåŠ¡è®¡ç®—å™¨",
                avgSleepLabel: "æ¯æ™šå¹³å‡ç¡çœ ï¼ˆå°æ—¶ï¼‰",
                daysLabel: "å¤©æ•°",
                totalDebt: "æ€»ç¡çœ å€ºåŠ¡",
                sleepPhases: "ç¡çœ é˜¶æ®µ",
                phasesInfo: "ä¸€ä¸ªå®Œæ•´çš„ç¡çœ å‘¨æœŸåŒ…å«5ä¸ªé˜¶æ®µ",
                phase1Title: "æµ…ç¡çœ  (N1)",
                phase1Desc: "æ¸…é†’ä¸Žç¡çœ ä¹‹é—´çš„è¿‡æ¸¡ã€‚æŒç»­5-10åˆ†é’Ÿã€‚",
                phase2Title: "æµ…ç¡çœ  (N2)",
                phase2Desc: "å¿ƒçŽ‡å‡æ…¢ï¼Œä½“æ¸©ä¸‹é™ã€‚æŒç»­10-25åˆ†é’Ÿã€‚",
                phase3Title: "æ·±ç¡çœ  (N3)",
                phase3Desc: "æœ€å…·æ¢å¤æ€§çš„é˜¶æ®µã€‚èº«ä½“ä¿®å¤ç»„ç»‡ï¼Œæž„å»ºéª¨éª¼å’Œè‚Œè‚‰ã€‚æŒç»­20-40åˆ†é’Ÿã€‚",
                phase4Title: "æ·±ç¡çœ æŒç»­",
                phase4Desc: "æœ€æ·±çš„ç¡çœ é˜¶æ®µã€‚å¾ˆéš¾è¢«å”¤é†’ã€‚æŒç»­10-20åˆ†é’Ÿã€‚",
                phase5Title: "å¿«é€Ÿçœ¼åŠ¨ç¡çœ ",
                phase5Desc: "å¿«é€Ÿçœ¼çƒè¿åŠ¨ã€‚åšæ¢¦å‘ç”Ÿã€‚å¤§è„‘å·©å›ºè®°å¿†ã€‚æŒç»­10-60åˆ†é’Ÿã€‚",
                cycles: "ä¸ªå‘¨æœŸ",
                hours: "å°æ—¶",
                firstDay: "ç¬¬ä¸€å¤©ï¼ðŸŽ‰",
                threeDays: "3å¤©è¿žç»­ï¼ðŸ”¥",
                weekWarrior: "ä¸€å‘¨å‹‡å£«ï¼ðŸ’ª",
                goalReached: "ä»Šæ—¥è¾¾æ ‡ï¼ðŸŽ¯",
                overachiever: "è¶…é¢å®Œæˆï¼ðŸŒŸ",
                hydrationHero: "æ°´åˆ†è‹±é›„ï¼ðŸ’§",
                debtLow: "å¾ˆå¥½ï¼æ‚¨çš„ç¡çœ å……è¶³ã€‚",
                debtModerate: "æ‚¨æœ‰ä¸€äº›ç¡çœ å€ºåŠ¡ã€‚è¯•ç€å¤šä¼‘æ¯ã€‚",
                debtHigh: "ç¡çœ å€ºåŠ¡ä¸¥é‡ï¼æœ¬å‘¨ä¼˜å…ˆè€ƒè™‘ç¡çœ ã€‚"
            },
            ja: {
                appTitle: "ã‚¦ã‚§ãƒ«ãƒã‚¹ãƒˆãƒ©ãƒƒã‚«ãƒ¼",
                appSubtitle: "æ°´åˆ†è£œçµ¦ã¨ç¡çœ ã‚’è¿½è·¡ã—ã¦ã€ã‚ˆã‚Šå¥åº·çš„ãªç”Ÿæ´»ã‚’",
                waterTracker: "ðŸ’§ æ°´åˆ†ãƒˆãƒ©ãƒƒã‚«ãƒ¼",
                sleepCalculator: "ðŸ˜´ ç¡çœ è¨ˆç®—æ©Ÿ",
                dailyGoal: "1æ—¥ã®æ°´åˆ†ç›®æ¨™",
                weightLabel: "ä½“é‡ (kg)",
                activityLabel: "æ´»å‹•ãƒ¬ãƒ™ãƒ«",
                sedentary: "åº§ã‚ŠãŒã¡",
                light: "è»½ã„æ´»å‹•",
                moderate: "ä¸­ç¨‹åº¦ã®æ´»å‹•",
                active: "æ´»ç™º",
                recommendedIntake: "æŽ¨å¥¨1æ—¥æ‘‚å–é‡",
                todayProgress: "ä»Šæ—¥ã®é€²æ—",
                custom: "ã‚«ã‚¹ã‚¿ãƒ ",
                add: "è¿½åŠ ",
                cancel: "ã‚­ãƒ£ãƒ³ã‚»ãƒ«",
                resetToday: "ä»Šæ—¥ã‚’ãƒªã‚»ãƒƒãƒˆ",
                achievements: "å®Ÿç¸¾",
                history: "å±¥æ­´",
                noHistory: "ã¾ã å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“ã€‚è¿½è·¡ã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†ï¼",
                sleepCycles: "ç¡çœ ã‚µã‚¤ã‚¯ãƒ«è¨ˆç®—æ©Ÿ",
                cycleInfo: "å„ç¡çœ ã‚µã‚¤ã‚¯ãƒ«ã¯90åˆ†ã§ã™ã€‚æœ€é©ãªç¡çœ ã«ã¯4-6ã‚µã‚¤ã‚¯ãƒ«ãŒå«ã¾ã‚Œã¾ã™ã€‚",
                wakeUpAt: "èµ·åºŠæ™‚åˆ»ï¼š",
                calculate: "è¨ˆç®—",
                suggestedBedtimes: "æŽ¨å¥¨å°±å¯æ™‚åˆ»ï¼š",
                bedtimePlanner: "å°±å¯ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼",
                goToBedAt: "å°±å¯æ™‚åˆ»ï¼š",
                suggestedWakeTimes: "æŽ¨å¥¨èµ·åºŠæ™‚åˆ»ï¼š",
                sleepDebt: "ç¡çœ è² å‚µè¨ˆç®—æ©Ÿ",
                avgSleepLabel: "1æ™©ã®å¹³å‡ç¡çœ æ™‚é–“ï¼ˆæ™‚é–“ï¼‰",
                daysLabel: "æ—¥æ•°",
                totalDebt: "ç·ç¡çœ è² å‚µ",
                sleepPhases: "ç¡çœ æ®µéšŽ",
                phasesInfo: "å®Œå…¨ãªç¡çœ ã‚µã‚¤ã‚¯ãƒ«ã¯5ã¤ã®æ®µéšŽã‚’çµŒã¾ã™",
                phase1Title: "æµ…ã„ç¡çœ  (N1)",
                phase1Desc: "è¦šé†’ã¨ç¡çœ ã®é–“ã®ç§»è¡Œã€‚5-10åˆ†ç¶šãã¾ã™ã€‚",
                phase2Title: "æµ…ã„ç¡çœ  (N2)",
                phase2Desc: "å¿ƒæ‹æ•°ãŒé…ããªã‚Šã€ä½“æ¸©ãŒä¸‹ãŒã‚Šã¾ã™ã€‚10-25åˆ†ç¶šãã¾ã™ã€‚",
                phase3Title: "æ·±ã„ç¡çœ  (N3)",
                phase3Desc: "æœ€ã‚‚å›žå¾©åŠ›ã®ã‚ã‚‹æ®µéšŽã€‚ä½“ã¯çµ„ç¹”ã‚’ä¿®å¾©ã—ã€éª¨ã¨ç­‹è‚‰ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚20-40åˆ†ç¶šãã¾ã™ã€‚",
                phase4Title: "æ·±ã„ç¡çœ ãŒç¶šã",
                phase4Desc: "æœ€ã‚‚æ·±ã„ç¡çœ æ®µéšŽã€‚ç›®è¦šã‚ã‚‹ã®ãŒéžå¸¸ã«é›£ã—ã„ã€‚10-20åˆ†ç¶šãã¾ã™ã€‚",
                phase5Title: "ãƒ¬ãƒ ç¡çœ ",
                phase5Desc: "æ€¥é€Ÿçœ¼çƒé‹å‹•ã€‚å¤¢ãŒèµ·ã“ã‚Šã¾ã™ã€‚è„³ã¯è¨˜æ†¶ã‚’å›ºå®šã—ã¾ã™ã€‚10-60åˆ†ç¶šãã¾ã™ã€‚",
                cycles: "ã‚µã‚¤ã‚¯ãƒ«",
                hours: "æ™‚é–“",
                firstDay: "åˆæ—¥ï¼ðŸŽ‰",
                threeDays: "3æ—¥é€£ç¶šï¼ðŸ”¥",
                weekWarrior: "é€±æˆ¦å£«ï¼ðŸ’ª",
                goalReached: "ä»Šæ—¥ã®ç›®æ¨™é”æˆï¼ðŸŽ¯",
                overachiever: "ç›®æ¨™è¶…é”æˆï¼ðŸŒŸ",
                hydrationHero: "æ°´åˆ†è£œçµ¦ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼ðŸ’§",
                debtLow: "ç´ æ™´ã‚‰ã—ã„ï¼ååˆ†ãªç¡çœ ã‚’å–ã£ã¦ã„ã¾ã™ã€‚",
                debtModerate: "å°‘ã—ç¡çœ è² å‚µãŒã‚ã‚Šã¾ã™ã€‚ã‚‚ã£ã¨ä¼‘æ¯ã‚’å–ã‚Šã¾ã—ã‚‡ã†ã€‚",
                debtHigh: "ã‹ãªã‚Šã®ç¡çœ è² å‚µï¼ä»Šé€±ã¯ç¡çœ ã‚’å„ªå…ˆã—ã¾ã—ã‚‡ã†ã€‚"
            },
            ko: {
                appTitle: "ì›°ë‹ˆìŠ¤ íŠ¸ëž˜ì»¤",
                appSubtitle: "ìˆ˜ë¶„ ì„­ì·¨ì™€ ìˆ˜ë©´ì„ ì¶”ì í•˜ì—¬ ë” ê±´ê°•í•œ ì‚¶ì„",
                waterTracker: "ðŸ’§ ìˆ˜ë¶„ íŠ¸ëž˜ì»¤",
                sleepCalculator: "ðŸ˜´ ìˆ˜ë©´ ê³„ì‚°ê¸°",
                dailyGoal: "ì¼ì¼ ìˆ˜ë¶„ ëª©í‘œ",
                weightLabel: "ì²´ì¤‘ (kg)",
                activityLabel: "í™œë™ ìˆ˜ì¤€",
                sedentary: "ì•‰ì•„ìžˆëŠ”",
                light: "ê°€ë²¼ìš´ í™œë™",
                moderate: "ì¤‘ê°„ í™œë™",
                active: "í™œë°œí•œ í™œë™",
                recommendedIntake: "ê¶Œìž¥ ì¼ì¼ ì„­ì·¨ëŸ‰",
                todayProgress: "ì˜¤ëŠ˜ì˜ ì§„í–‰ìƒí™©",
                custom: "ì‚¬ìš©ìž ì •ì˜",
                add: "ì¶”ê°€",
                cancel: "ì·¨ì†Œ",
                resetToday: "ì˜¤ëŠ˜ ìž¬ì„¤ì •",
                achievements: "ì—…ì ",
                history: "ížˆìŠ¤í† ë¦¬",
                noHistory: "ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤. ì¶”ì ì„ ì‹œìž‘í•˜ì„¸ìš”!",
                sleepCycles: "ìˆ˜ë©´ ì£¼ê¸° ê³„ì‚°ê¸°",
                cycleInfo: "ê° ìˆ˜ë©´ ì£¼ê¸°ëŠ” 90ë¶„ìž…ë‹ˆë‹¤. ìµœì ì˜ ìˆ˜ë©´ì—ëŠ” 4-6ì£¼ê¸°ê°€ í¬í•¨ë©ë‹ˆë‹¤.",
                wakeUpAt: "ê¸°ìƒ ì‹œê°„:",
                calculate: "ê³„ì‚°",
                suggestedBedtimes: "ê¶Œìž¥ ì·¨ì¹¨ ì‹œê°„:",
                bedtimePlanner: "ì·¨ì¹¨ ê³„íš",
                goToBedAt: "ì·¨ì¹¨ ì‹œê°„:",
                suggestedWakeTimes: "ê¶Œìž¥ ê¸°ìƒ ì‹œê°„:",
                sleepDebt: "ìˆ˜ë©´ ë¶€ì±„ ê³„ì‚°ê¸°",
                avgSleepLabel: "í‰ê·  ìˆ˜ë©´ ì‹œê°„(ì‹œê°„)",
                daysLabel: "ì¼ìˆ˜",
                totalDebt: "ì´ ìˆ˜ë©´ ë¶€ì±„",
                sleepPhases: "ìˆ˜ë©´ ë‹¨ê³„",
                phasesInfo: "ì™„ì „í•œ ìˆ˜ë©´ ì£¼ê¸°ëŠ” 5ë‹¨ê³„ë¥¼ ê±°ì¹©ë‹ˆë‹¤",
                phase1Title: "ì–•ì€ ìˆ˜ë©´ (N1)",
                phase1Desc: "ê°ì„±ê³¼ ìˆ˜ë©´ ì‚¬ì´ì˜ ì „í™˜. 5-10ë¶„ ì§€ì†ë©ë‹ˆë‹¤.",
                phase2Title: "ì–•ì€ ìˆ˜ë©´ (N2)",
                phase2Desc: "ì‹¬ë°•ìˆ˜ê°€ ëŠë ¤ì§€ê³  ì²´ì˜¨ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤. 10-25ë¶„ ì§€ì†ë©ë‹ˆë‹¤.",
                phase3Title: "ê¹Šì€ ìˆ˜ë©´ (N3)",
                phase3Desc: "ê°€ìž¥ íšŒë³µë ¥ì´ ë†’ì€ ë‹¨ê³„. ì‹ ì²´ëŠ” ì¡°ì§ì„ ë³µêµ¬í•˜ê³  ë¼ˆì™€ ê·¼ìœ¡ì„ ë§Œë“­ë‹ˆë‹¤. 20-40ë¶„ ì§€ì†ë©ë‹ˆë‹¤.",
                phase4Title: "ê¹Šì€ ìˆ˜ë©´ ê³„ì†",
                phase4Desc: "ê°€ìž¥ ê¹Šì€ ìˆ˜ë©´ ë‹¨ê³„. ê¹¨ìš°ê¸° ë§¤ìš° ì–´ë µìŠµë‹ˆë‹¤. 10-20ë¶„ ì§€ì†ë©ë‹ˆë‹¤.",
                phase5Title: "ë ˜ ìˆ˜ë©´",
                phase5Desc: "ë¹ ë¥¸ ì•ˆêµ¬ ìš´ë™. ê¿ˆì´ ë°œìƒí•©ë‹ˆë‹¤. ë‡Œê°€ ê¸°ì–µì„ í†µí•©í•©ë‹ˆë‹¤. 10-60ë¶„ ì§€ì†ë©ë‹ˆë‹¤.",
                cycles: "ì£¼ê¸°",
                hours: "ì‹œê°„",
                firstDay: "ì²«ë‚ ! ðŸŽ‰",
                threeDays: "3ì¼ ì—°ì†! ðŸ”¥",
                weekWarrior: "ì£¼ê°„ ì „ì‚¬! ðŸ’ª",
                goalReached: "ì˜¤ëŠ˜ ëª©í‘œ ë‹¬ì„±! ðŸŽ¯",
                overachiever: "ì´ˆê³¼ ë‹¬ì„±! ðŸŒŸ",
                hydrationHero: "ìˆ˜ë¶„ ë³´ì¶© ì˜ì›…! ðŸ’§",
                debtLow: "ì¢‹ìŠµë‹ˆë‹¤! ì¶©ë¶„í•œ ìˆ˜ë©´ì„ ì·¨í•˜ê³  ìžˆìŠµë‹ˆë‹¤.",
                debtModerate: "ì•½ê°„ì˜ ìˆ˜ë©´ ë¶€ì±„ê°€ ìžˆìŠµë‹ˆë‹¤. ë” ë§Žì´ ì‰¬ì„¸ìš”.",
                debtHigh: "ìƒë‹¹í•œ ìˆ˜ë©´ ë¶€ì±„! ì´ë²ˆ ì£¼ì— ìˆ˜ë©´ì„ ìš°ì„ ì‹œí•˜ì„¸ìš”."
            }
        };

        let currentLang = 'en';
        let waterData = {
            dailyGoal: 2400,
            currentIntake: 0,
            history: [],
            badges: {
                firstDay: false,
                threeDays: false,
                weekWarrior: false,
                goalReached: false,
                overachiever: false,
                hydrationHero: false
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            updateUI();
            calculateDailyGoal();
            renderBadges();
            renderHistory();

            // Tab switching
            document.getElementById('waterTab').addEventListener('click', () => switchTab('water'));
            document.getElementById('sleepTab').addEventListener('click', () => switchTab('sleep'));

            // Language change
            document.getElementById('languageSelector').addEventListener('change', (e) => {
                currentLang = e.target.value;
                updateLanguage();
            });

            // Weight/activity change
            document.getElementById('weight').addEventListener('input', calculateDailyGoal);
            document.getElementById('activityLevel').addEventListener('change', calculateDailyGoal);
        });

        function switchTab(tab) {
            const waterTab = document.getElementById('waterTab');
            const sleepTab = document.getElementById('sleepTab');
            const waterSection = document.getElementById('waterSection');
            const sleepSection = document.getElementById('sleepSection');

            if (tab === 'water') {
                waterTab.classList.add('active-tab');
                sleepTab.classList.remove('active-tab');
                waterSection.classList.remove('hidden');
                sleepSection.classList.add('hidden');
            } else {
                sleepTab.classList.add('active-tab');
                waterTab.classList.remove('active-tab');
                sleepSection.classList.remove('hidden');
                waterSection.classList.add('hidden');
            }
        }

        function updateLanguage() {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[currentLang][key]) {
                    el.textContent = translations[currentLang][key];
                }
            });
            renderBadges();
            renderHistory();
        }

        function calculateDailyGoal() {
            const weight = parseFloat(document.getElementById('weight').value) || 70;
            const activityLevel = parseFloat(document.getElementById('activityLevel').value) || 1.2;
            const goal = Math.round(weight * 35 * activityLevel);
            waterData.dailyGoal = goal;
            document.getElementById('dailyGoalDisplay').textContent = `${goal} ml`;
            document.getElementById('goalDisplay').textContent = goal;
            updateWaterProgress();
            saveData();
        }

        function addWater(amount) {
            waterData.currentIntake += amount;
            updateWaterProgress();
            checkBadges();
            saveData();
        }

        function showCustomInput() {
            document.getElementById('customInput').classList.remove('hidden');
        }

        function hideCustomInput() {
            document.getElementById('customInput').classList.add('hidden');
            document.getElementById('customAmount').value = '';
        }

        function addCustomWater() {
            const amount = parseInt(document.getElementById('customAmount').value);
            if (amount > 0) {
                addWater(amount);
                hideCustomInput();
            }
        }

        function updateWaterProgress() {
            const percentage = Math.min((waterData.currentIntake / waterData.dailyGoal) * 100, 100);
            document.getElementById('waterLevel').style.height = `${percentage}%`;
            document.getElementById('currentIntake').textContent = waterData.currentIntake;
            document.getElementById('percentageDisplay').textContent = `${Math.round(percentage)}%`;
        }

        function resetWaterToday() {
            // Save today's data to history before reset
            if (waterData.currentIntake > 0) {
                const today = new Date().toISOString().split('T')[0];
                waterData.history.unshift({
                    date: today,
                    intake: waterData.currentIntake,
                    goal: waterData.dailyGoal,
                    percentage: Math.round((waterData.currentIntake / waterData.dailyGoal) * 100)
                });
                // Keep only last 30 days
                waterData.history = waterData.history.slice(0, 30);
            }
            waterData.currentIntake = 0;
            updateWaterProgress();
            renderHistory();
            saveData();
        }

        function checkBadges() {
            const percentage = (waterData.currentIntake / waterData.dailyGoal) * 100;

            if (!waterData.badges.firstDay && waterData.history.length === 0 && waterData.currentIntake > 0) {
                waterData.badges.firstDay = true;
            }
            if (!waterData.badges.goalReached && percentage >= 100) {
                waterData.badges.goalReached = true;
            }
            if (!waterData.badges.overachiever && percentage >= 150) {
                waterData.badges.overachiever = true;
            }
            if (!waterData.badges.threeDays && waterData.history.length >= 2) {
                waterData.badges.threeDays = true;
            }
            if (!waterData.badges.weekWarrior && waterData.history.length >= 6) {
                waterData.badges.weekWarrior = true;
            }
            if (!waterData.badges.hydrationHero && waterData.history.filter(h => h.percentage >= 100).length >= 30) {
                waterData.badges.hydrationHero = true;
            }

            renderBadges();
        }

        function renderBadges() {
            const container = document.getElementById('badgesContainer');
            const badges = [
                { key: 'firstDay', emoji: 'ðŸŽ‰', locked: 'ðŸ”’' },
                { key: 'threeDays', emoji: 'ðŸ”¥', locked: 'ðŸ”’' },
                { key: 'weekWarrior', emoji: 'ðŸ’ª', locked: 'ðŸ”’' },
                { key: 'goalReached', emoji: 'ðŸŽ¯', locked: 'ðŸ”’' },
                { key: 'overachiever', emoji: 'ðŸŒŸ', locked: 'ðŸ”’' },
                { key: 'hydrationHero', emoji: 'ðŸ’§', locked: 'ðŸ”’' }
            ];

            container.innerHTML = badges.map(badge => {
                const unlocked = waterData.badges[badge.key];
                return `
                    <div class="glass rounded-2xl p-6 text-center ${unlocked ? 'badge-shine' : 'opacity-50'}">
                        <div class="text-5xl mb-3">${unlocked ? badge.emoji : badge.locked}</div>
                        <p class="text-white text-sm font-medium">${translations[currentLang][badge.key]}</p>
                    </div>
                `;
            }).join('');
        }

        function renderHistory() {
            const container = document.getElementById('historyContainer');
            if (waterData.history.length === 0) {
                container.innerHTML = `<p class="text-white/60 text-center py-8">${translations[currentLang].noHistory}</p>`;
                return;
            }

            container.innerHTML = waterData.history.slice(0, 7).map(entry => `
                <div class="glass rounded-2xl p-4 flex justify-between items-center">
                    <div>
                        <p class="text-white font-semibold">${entry.date}</p>
                        <p class="text-white/70 text-sm">${entry.intake} / ${entry.goal} ml</p>
                    </div>
                    <div class="text-right">
                        <p class="text-2xl font-bold text-white">${entry.percentage}%</p>
                        <p class="text-white/70 text-sm">${entry.percentage >= 100 ? 'âœ“' : 'âˆ’'}</p>
                    </div>
                </div>
            `).join('');
        }

        // Sleep Calculator Functions
        function calculateBedtimes() {
            const wakeUpTime = document.getElementById('wakeUpTime').value;
            if (!wakeUpTime) return;

            const [hours, minutes] = wakeUpTime.split(':').map(Number);
            const wakeDate = new Date();
            wakeDate.setHours(hours, minutes, 0);

            const cycles = [6, 5, 4]; // 6, 5, 4 cycles
            const bedtimes = cycles.map(cycleCount => {
                const sleepMinutes = cycleCount * 90 + 14; // 14 min to fall asleep
                const bedTime = new Date(wakeDate.getTime() - sleepMinutes * 60000);
                return {
                    time: bedTime.toTimeString().slice(0, 5),
                    cycles: cycleCount,
                    hours: (cycleCount * 1.5).toFixed(1)
                };
            });

            document.getElementById('bedtimesResult').classList.remove('hidden');
            document.getElementById('bedtimesList').innerHTML = bedtimes.map(bt => `
                <div class="glass rounded-2xl p-6 text-center">
                    <p class="text-3xl font-bold text-white mb-2">${bt.time}</p>
                    <p class="text-white/80">${bt.cycles} ${translations[currentLang].cycles}</p>
                    <p class="text-white/60 text-sm">${bt.hours} ${translations[currentLang].hours}</p>
                </div>
            `).join('');
        }

        function calculateWakeTimes() {
            const bedTime = document.getElementById('bedTime').value;
            if (!bedTime) return;

            const [hours, minutes] = bedTime.split(':').map(Number);
            const bedDate = new Date();
            bedDate.setHours(hours, minutes, 0);
            bedDate.setTime(bedDate.getTime() + 14 * 60000); // Add 14 min to fall asleep

            const cycles = [4, 5, 6]; // 4, 5, 6 cycles
            const wakeTimes = cycles.map(cycleCount => {
                const sleepMinutes = cycleCount * 90;
                const wakeTime = new Date(bedDate.getTime() + sleepMinutes * 60000);
                return {
                    time: wakeTime.toTimeString().slice(0, 5),
                    cycles: cycleCount,
                    hours: (cycleCount * 1.5).toFixed(1)
                };
            });

            document.getElementById('waketimesResult').classList.remove('hidden');
            document.getElementById('waketimesList').innerHTML = wakeTimes.map(wt => `
                <div class="glass rounded-2xl p-6 text-center">
                    <p class="text-3xl font-bold text-white mb-2">${wt.time}</p>
                    <p class="text-white/80">${wt.cycles} ${translations[currentLang].cycles}</p>
                    <p class="text-white/60 text-sm">${wt.hours} ${translations[currentLang].hours}</p>
                </div>
            `).join('');
        }

        function calculateSleepDebt() {
            const avgSleep = parseFloat(document.getElementById('avgSleep').value) || 0;
            const numDays = parseInt(document.getElementById('numDays').value) || 0;

            const optimalSleep = 8;
            const dailyDebt = optimalSleep - avgSleep;
            const totalDebt = dailyDebt * numDays;

            document.getElementById('sleepDebtResult').classList.remove('hidden');
            document.getElementById('debtAmount').textContent = `${Math.abs(totalDebt).toFixed(1)} ${translations[currentLang].hours}`;

            let advice = '';
            if (totalDebt <= 0) {
                advice = translations[currentLang].debtLow;
            } else if (totalDebt <= 7) {
                advice = translations[currentLang].debtModerate;
            } else {
                advice = translations[currentLang].debtHigh;
            }
            document.getElementById('debtAdvice').textContent = advice;
        }

        // LocalStorage
        function saveData() {
            localStorage.setItem('wellnessTrackerData', JSON.stringify(waterData));
        }

        function loadData() {
            const saved = localStorage.getItem('wellnessTrackerData');
            if (saved) {
                waterData = JSON.parse(saved);
            }
        }

        function updateUI() {
            calculateDailyGoal();
            updateWaterProgress();
        }
    </script>
</body>
</html>